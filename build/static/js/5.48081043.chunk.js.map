{"version":3,"sources":["common/prompt/index.js","page/item/index.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_redux__WEBPACK_IMPORTED_MODULE_1__","_header_store__WEBPACK_IMPORTED_MODULE_2__","Prompt","props","closePrompt","a","createElement","id","className","style","display","opacity","onClick","connect","state","maxOff","getIn","dispatch","actionCreate","Item","_this","Object","C_Users_MacBook_Pro_Desktop_react_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","C_Users_MacBook_Pro_Desktop_react_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_MacBook_Pro_Desktop_react_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","addCount","count","setState","detail","limit_num","subCount","changeImgIndex","index","imgIndex","handleBuyNow","_this$props","history","addCarPanelHandle","push","getSkuId","match","params","getList","_this2","_this$props2","_this$state","react__WEBPACK_IMPORTED_MODULE_5___default","ali_images","map","item","key","src","concat","alt","price","title","sub_title","sku_list","react_router_dom__WEBPACK_IMPORTED_MODULE_9__","to","color","image","_common_prompt__WEBPACK_IMPORTED_MODULE_6__","Component","selectors","descItem","toJS","fromJS","HeaderActionCreate","addcarPanel","merge","checked"],"mappings":"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","file":"static/js/5.48081043.chunk.js","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { actionCreate } from '../header/store';\r\n\r\nimport './index.css';\r\n\r\nconst Prompt = props => {\r\n  const { closePrompt } = props;\r\n  return (\r\n    <div id=\"prompt\">\r\n      <div className=\"module-dialog-layer\" style={{ display: 'block' }} />\r\n      <div\r\n        className=\"clear module-dialog module-dialog-confirm module-dialog-show\"\r\n        style={{ display: 'block', opacity: 1 }}\r\n      >\r\n        <div className=\"dialog-panel\">\r\n          <div className=\"topbar\">\r\n            <div className=\"dialog-tit clear\">\r\n              <h4 className=\"js-dialog-title\">提示</h4>\r\n            </div>\r\n            <span className=\"dialog-close png\" onClick={closePrompt} />\r\n          </div>\r\n          <div className=\"dialog-con js-dialog-container\">\r\n            <div className=\"confirm-msg\">\r\n              商品已达到最大可购买数量，无法继续添加\r\n            </div>\r\n          </div>\r\n          <div className=\"dialog-btn-wrap clear\">\r\n            <div\r\n              className=\"blue-main-btn normal-main-btn js-dialog-done\"\r\n              onClick={closePrompt}\r\n            >\r\n              <a>确定</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nconst Dialog = props => {\r\n  const { maxOff, closePrompt } = props;\r\n  return maxOff ? <Prompt closePrompt={closePrompt} /> : null;\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    maxOff: state.getIn(['Header', 'maxOff'])\r\n  };\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    closePrompt: () => {\r\n      dispatch(actionCreate.closePrompt());\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Dialog);\r\n","import React, { Component } from 'react';\r\nimport Prompt from '../../common/prompt';\r\nimport { connect } from 'react-redux';\r\nimport { selectors, actionCreate } from './store';\r\nimport { Link } from 'react-router-dom';\r\nimport { actionCreate as HeaderActionCreate } from '../../common/header/store';\r\n\r\nimport './style.css';\r\nimport { fromJS } from 'immutable';\r\n\r\nclass Item extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      imgIndex: 0,\r\n      count: 1\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.props.getSkuId(this.props.match.params.id); // 获取商品id\r\n    this.props.getList(); // 商品详细信息\r\n  }\r\n  addCount = count => {\r\n    this.setState(() => {\r\n      count++;\r\n      if (count > this.props.detail.limit_num) {\r\n        count = this.props.detail.limit_num;\r\n      }\r\n      return {\r\n        count\r\n      };\r\n    });\r\n  };\r\n  subCount = count => {\r\n    this.setState(() => {\r\n      count--;\r\n      if (count < 1) {\r\n        count = 1;\r\n      }\r\n      return {\r\n        count\r\n      };\r\n    });\r\n  };\r\n  changeImgIndex = index => {\r\n    this.setState(() => {\r\n      return {\r\n        imgIndex: index\r\n      };\r\n    });\r\n  };\r\n  handleBuyNow = (detail, count) => {\r\n    // 现在购买\r\n    const { history, addCarPanelHandle } = this.props;\r\n    history.push('/cart');\r\n    addCarPanelHandle(detail, count);\r\n  };\r\n\r\n  render() {\r\n    const { detail, addCarPanelHandle, getSkuId } = this.props;\r\n    const { imgIndex, count } = this.state;\r\n    if (!detail) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div id=\"main\">\r\n        <div className=\"store-content item\">\r\n          <div className=\"item-box\">\r\n            <div className=\"gallery-wrapper\">\r\n              <div className=\"gallery\">\r\n                <div className=\"thumbnail\">\r\n                  <ul>\r\n                    {detail.ali_images.map((item, index) => {\r\n                      return (\r\n                        <li\r\n                          className={imgIndex === index ? 'on' : ''}\r\n                          key={index}\r\n                          onClick={() => {\r\n                            this.changeImgIndex(index);\r\n                          }}\r\n                        >\r\n                          <img\r\n                            src={`${item}?x-oss-process=image/resize,w_54/quality,Q_90/format,webp`}\r\n                            alt=\"\"\r\n                          />\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n                <div className=\"thumb\">\r\n                  <ul>\r\n                    {detail.ali_images.map((item, index) => {\r\n                      return (\r\n                        <li\r\n                          className={imgIndex === index ? 'on' : ''}\r\n                          key={index}\r\n                        >\r\n                          <img\r\n                            src={`${item}?x-oss-process=image/resize,w_440/quality,Q_90/format,webp`}\r\n                            alt=\"\"\r\n                          />\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"banner\">\r\n              <div className=\"sku-custom-title\">\r\n                <div className=\"params-price\">\r\n                  <span>\r\n                    <em>¥</em>\r\n                    <i>{detail.price}</i>\r\n                  </span>\r\n                </div>\r\n                <div className=\"params-info\">\r\n                  <h4>{detail.title}</h4>\r\n                  <h6>{detail.sub_title}</h6>\r\n                </div>\r\n              </div>\r\n              <div className=\"sku-dynamic-params-panel\">\r\n                <div className=\"sku-dynamic-params clear\">\r\n                  <span className=\"params-name\">颜色</span>\r\n                  <ul className=\"params-colors\">\r\n                    {detail.sku_list.map(item => {\r\n                      return (\r\n                        <li\r\n                          className={imgIndex === item.id ? 'cur' : ''}\r\n                          key={item.id}\r\n                        >\r\n                          <Link\r\n                            to={`/item/${item.id}`}\r\n                            title={item.color}\r\n                            onClick={() => {\r\n                              getSkuId(item.id);\r\n                            }}\r\n                          >\r\n                            <i>\r\n                              <img src={item.image} alt=\"\" />\r\n                            </i>\r\n                          </Link>\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n                <div className=\"sku-dynamic-params clear\">\r\n                  <div className=\"params-name\">数量</div>\r\n                  <div className=\"params-detail clear\">\r\n                    <div className=\"item-num js-select-quantity\">\r\n                      <span\r\n                        onClick={() => {\r\n                          this.subCount(count);\r\n                        }}\r\n                        className={count <= 1 ? 'down down-disabled' : 'down'}\r\n                      >\r\n                        -\r\n                      </span>\r\n                      <span className=\"num\">{count}</span>\r\n                      <span\r\n                        className={\r\n                          count >= detail.limit_num ? 'up up-disabled' : 'up'\r\n                        }\r\n                        onClick={() => {\r\n                          this.addCount(count);\r\n                        }}\r\n                      >\r\n                        +\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"sku-status\">\r\n                <div className=\"cart-operation-wrapper clearfix\">\r\n                  <span\r\n                    className=\"blue-title-btn js-add-cart\"\r\n                    onClick={() => {\r\n                      addCarPanelHandle(detail, count);\r\n                    }}\r\n                  >\r\n                    <a>加入购物车</a>\r\n                  </span>\r\n                  <span\r\n                    className=\"gray-title-btn\"\r\n                    onClick={() => {\r\n                      this.handleBuyNow(detail, count);\r\n                    }}\r\n                  >\r\n                    <a>现在购买</a>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Prompt />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    detail: selectors.descItem(state).toJS()[0]\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    getSkuId: id => {\r\n      dispatch(actionCreate.getSkuId(id));\r\n    },\r\n    getList: () => {\r\n      dispatch(actionCreate.getList());\r\n    },\r\n    addCarPanelHandle: (detail, count) => {\r\n      // 添加商品到购物车中\r\n      detail = fromJS(detail);\r\n      dispatch(\r\n        HeaderActionCreate.addcarPanel(\r\n          detail.merge({\r\n            count,\r\n            checked: true\r\n          })\r\n        )\r\n      );\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Item);\r\n"],"sourceRoot":""}